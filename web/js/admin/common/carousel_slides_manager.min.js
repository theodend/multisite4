var CarouselSlidesManager=function(){function a(b,c,d){this.$element=b,this.slides=c,this.options={},this.options=$.extend(!0,{},a.DEFAULTS,d||{}),this.init(),this.initEvents()}return a.prototype.init=function(){},a.prototype.addSlide=function(a){var b;this.slides.push(a),b=this.createRow(a),this.$element.append(b)},a.prototype.getSlideById=function(a){var b=null;return $.each(this.slides,function(c,d){d.id==a&&(b=d)}),b},a.prototype.getSlideIndex=function(a){var b=null;return $.each(this.slides,function(c,d){d.id==a&&(b=c)}),b},a.prototype.removeSlide=function(a,b){var c,d,e,f=this;c=this.getSlideById(b),null!=c&&(d=this.getSlideIndex(b),e=a.next(".loader"),a.hide(),e.show(),$.ajax({type:"DELETE",url:this.options.deleteSlideUrl,data:{id:b}}).done(function(c){if(0==c.error){var g=f.options.rowPrefix+b;$("#"+g).remove(),f.slides.splice(d,1),f.options.showMsg(c.msg,!0)}else a.show(),e.hide(),f.options.showMsg(c.msg,!1)}).fail(function(b){a.show(),e.hide(),f.options.showMsg(b.statusCode+" "+b.statusText,!1)}))},a.prototype.changeActiveState=function(a){var b,c,d=this;if(b=this.$element.find("#"+this.options.rowPrfix+a),b.length>0){var e=b.find("button.slide-delete-btn");c=e.next(".loader"),e.hide(),c.show(),d.options.showMsg(),$.ajax({type:"PUT",url:this.options.changeActiveStateUrl,data:{id:a}}).done(function(a){0==a.error?(b.isActive=!b.isActive,d.options.showMsg(a.msg,!0)):d.options.showMsg(a.msg,!1),e.show(),c.hide()}).fail(function(a){e.show(),c.hide(),d.options.showMsg(a.statusCode+" "+a.statusText,!1)})}},a.prototype.changeSliderDuration=function(a,b){if(0>=a||""==this.options.changeSliderDurationUrl)return!1;var c=b.next(".loader");return b.hide(),c.show(),$.ajax({type:"PUT",url:this.options.changeSliderDurationUrl,data:{duration:a}}).done(function(a){0==a.error}).fail(function(){}).always(function(){b.show(),c.hide()}),!0},a.prototype.confirm=function(a){return window.confirm(a)},a.prototype.initEvents=function(){var a=this;$(document).on("click","button.slide-delete-btn",function(b){return b.preventDefault(),a.confirm(a.options.deleteMessage)&&a.removeSlide($(this),$(this).data("slide")),!1}),$(document).on("change","[data-activation='']",function(b){b.preventDefault();var c=parseInt($(this).attr("id").replace(a.options.checkboxIdPrefix,""));a.changeActiveState(c,$(this))}),$(this.options.btnChangeDurationId).on("click",function(b){b.preventDefault(),a.changeSliderDuration(parseInt($(a.options.iptChangeDurationId).val()),$(this))})},a.prototype.createRow=function(a){var b=this.options.rowTmpl;return b=b.replace("[[webRoot]]",a.webRoot).replace("[[position]]",a.position+"").replace(/\[\[id\]\]/g,a.id),b=null!=a.title?b.replace("[[title]]",a.title):b.replace("[[title]]",""),$(b)},a.DEFAULTS={deleteMessage:"Attention! cette action est irr√©versible. Vous confirmez la suppression ?",deleteSlideUrl:"",changeActiveStateUrl:"",changeSliderDurationUrl:"",rowPrefix:"slide_",checkboxIdPrefix:"active_slide_",btnChangeDurationId:"#slider-change-duration-btn",iptChangeDurationId:"#slider-change-duration-ipt",showMsg:function(){},rowTmpl:"<div class='slide' id='slide_[[id]]'><table><tr><td class='slide-handle'></td><td class='slide-position'>[[position]]</td><td class='slide-img'><img src='[[webRoot]]' /></td><td class=\"slide-activation\"><label for=\"active_slide_[[id]]\"><input type=\"checkbox\" id=\"active_slide_[[id]]\"  data-activation=''/> activer</label></td><td class=\"slide-title\"><input type=\"text\" value='[[title]]'/></td><td class=\"slide-delete\"><button type='button' class='btn btn-default slide-delete-btn' data-slide='[[id]]'><i class=\"fa fa-trash-o\"></i><div class=\"loader\"></div></button></td></tr></table></div>"},a}();